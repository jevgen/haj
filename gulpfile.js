'use strict';var gulp = require('gulp');var child = require('child_process');var gulpUtil = require('gulp-util');var sass = require('gulp-sass');var autoprefixer = require("gulp-autoprefixer");var cssnano = require('gulp-cssnano');var concat = require('gulp-concat');var uglify = require('gulp-uglify');function jekyllLogger(buffer) {    buffer.toString()        .split(/\n/)        .forEach((message) => gulpUtil.log('Jekyll: ' + message));}function onError(err) {    console.log(err);    this.emit('end');}/* Development */gulp.task('scss-dev', function () {    return gulp.src('_sass/app.scss')        .pipe(sass())        .on('error', onError)        .pipe(gulp.dest('assets'))});gulp.task('jekyll-dev-serve', function () {    gulp.watch("_sass/**/*.scss", ["scss-dev"]);    var jekyllServe = child.spawn('jekyll', ['serve', '--watch', '--incremental', '--drafts']);    jekyllServe.stdout.on('data', jekyllLogger);    jekyllServe.stderr.on('data', jekyllLogger);});gulp.task("watch", function () {    gulp.watch("_sass/**/*.scss", ["scss-dev"]);});/* Build tasks */// Script pathsvar jsFiles = [        'assets/js/jquery.js',        'assets/js/tether.js',        'assets/js/bootstrap.js',        'assets/js/masonry.js',        'assets/js/imagesloaded.js',        'assets/js/app.js'    ],    jsDest = 'assets/js';gulp.task('js-prod', function () {    return gulp.src(jsFiles)        .pipe(concat('bundle.js'))        .pipe(uglify())        .pipe(gulp.dest(jsDest));});gulp.task('scss-prod', function () {    return gulp.src('_sass/app.scss')        .pipe(sass())        .on('error', onError)        .pipe(autoprefixer({            browsers: ['last 2 versions', 'ie >= 8']        }))        .pipe(cssnano())        .pipe(gulp.dest('assets'))});gulp.task('jekyll-prod-build', ['js-prod', 'scss-prod'], function () {    var jekyllBuild = child.spawn('jekyll', ['build']);    jekyllBuild.stdout.on('data', jekyllLogger);    jekyllBuild.stderr.on('data', jekyllLogger);});